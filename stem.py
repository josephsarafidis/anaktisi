from greek_stemmer import stemmer
import re

# File paths
input_file = "data/stopwords.txt"
output_file = "data/stopwords_stemmed.txt"

l_keywords = set([
    # --- Βασικά (Άρθρα, Αντωνυμίες, Προθέσεις, Σύνδεσμοι) ---
    "ο", "γι", "η", "το", "οι", "τα", "του", "της", "των", "τον", "τη", "την", "τις",
    "ένας", "μια", "μία", "ένα", "ενός", "μιας", "μίας", "δε", "ακριβώς", "εξής", "βέβαια",
    "στο", "στη", "στην", "στους", "στις", "στα", "στον", "είμαστε", "είμαι", "είστε","όλους","κανείς",
    "εγώ", "εσύ", "αυτός", "αυτή", "αυτό", "αυτόν", "αυτήν", "αυτού", "αυτής", "αυτών", "καλά",
    "εμείς", "εσείς", "αυτοί", "αυτές", "αυτά", "κατ", "απ", "πει", "ξέρω", 
    "μου", "σου", "του", "της", "μας", "σας", "τους", "δικός", "δική", "δικό", "εαυτού",
    "τούτος", "εκείνος", "τέτοιος", "τόσος",
    "που", "ποιος", "ποια", "ποιο", "τι", "όποιος", "όποια", "όποιο", "οποίος", "οποία", 
    "οποίο", "οποιοσδήποτε", "πόσος",
    "κάποιος", "κάτι", "κανένας", "καμία", "κανένα", "καθένας", "καθεμία", "καθετί", "τίποτα",
    "από", "για", "με", "σε", "προς", "κατά", "παρά", "αντί", "δίχως", "χωρίς", "μέσω", "μετά", "πριν",
    "εν", "εκ", "επί", "περί", "υπό", "υπέρ", "ανά",
    "και", "κι", "αλλά", "ή", "είτε", "ούτε", "μήτε", "όμως", "ωστόσο", "επομένως",
    "ότι", "πως", "γιατί", "επειδή", "αφού", "ενώ", "καθώς", "αν", "εάν", "άμα", "ώστε", "μολονότι",
    "να", "θα", "ας", "μα", "δεν", "μη", "μην", "ως","ευχαριστούμε","όπως","ορίστε","όχι","ναι",
    "άλλο","μάλιστα","λοιπόν", "διότι", "βεβαίως", "κάθε", "μέσα", "επίσης", "άλλη",
    # --- Ρήματα Ρουτίνας & Γενικά ---
    "είναι", "ήταν", "έχω", "είχε", "έχεις", "έχει", "έχετε", "έχουμε", "έχουν","είχατε",
    "κάνει", "κάνουμε", "κάνετε", "λέω", "λες", "λέτε", "λέμε", "νομίζω", "πιστεύω",
    "θέλω", "θέλουμε", "θέλετε", "πρέπει", "γίνεται", "φορά", "πράγμα", "πράγματα",
    "εδώ", "εκεί", "πού", "πώς", "πότε", "όλα", "όλοι", "όλες", "όλο", "κάνω", "μπορώ",
    "έτσι", "πολύ", "λίγο", "τώρα", "τότε", "πια", "πάλι", "ακόμα", "ήδη", "μόνο", "κ", "κο", "ξέρετε",    "ευχαριστούμε","μάλιστα","είπε", "αφορά", "λέει", "πάρα","κλείσει","πω","μπορεί","γίνει",
    "συνεπώς","δηλαδή","έγινε","ήθελα", "πείτε", "είπα", "ερωτάται", "υπάρχει", "υπάρχουν", "είπατε",

    # --- Προσφωνήσεις & Ευγένειες Βουλής ---
    "κύριος","κύριε", "κυρία", "κύριοι", "κύριο", "κυρίες", "συνάδελφε", "συνάδελφος", "συνάδελφοι", "αγαπητέ", "αγαπητοί",
    "πρόεδρε", "υπουργέ","υπουργός","υπουργό", "υπουργείου", "υφυπουργέ", "βουλευτή","βουλευτής", "βουλευτές", 
    "παρακαλώ", "ευχαριστώ", "λόγο", "ομιλία", "τοποθέτηση",
    
    # --- Ορολογία Βουλής & Διαδικαστικά (Noise words για την ανάλυση) ---
    "νομοσχέδιο", "σχέδιο", "νόμου", "νόμος", "νόμοι", 
    "άρθρο","άρθρου", "άρθρα", "διάταξη", "διατάξεις", "παράγραφος",
    "τροπολογία", "τροπολογίες", "επιτροπή", "επιτροπές", "τροποποιήθηκε",
    "ολομέλεια", "βουλή", "βουλής", "αίθουσα", "εδρανα",
    "πρακτικά", "συνεδρίαση", "ημερήσια", "διάταξη",
    "ψηφοφορία", "ψήφιση", "ψήφο", "συζήτηση", "ερώτηση", "επίκαιρη", "σώμα",
    "εισηγητής", "εισηγήτρια", "κοινοβουλευτικός", "εκπρόσωπος", 
    "κυβέρνηση", "κυβέρνησης", "αντιπολίτευση", "αξιωματική",
    "υπουργείο", "υπουργεία", "κόμμα", "κόμματα","υφυπουργός", "πλειοψηφία", "δεκτό", "θέμα",
    
    # --- Χρονικά & Ποσοτικά ---
    "σήμερα", "χθες", "αύριο", "φέτος", "πέρυσι","σύντομα","παρών","όταν", "αριθμό",
    "έτος", "έτη", "χρόνια", "ημέρα", "μέρες", "χρόνο", "λεπτά", "ώρα","λεπτό", "στιγμή",
    "ευρώ", "εκατομμύρια", "δισεκατομμύρια", "χιλιάδες", "ποσό", "ποσά", "νούμερα",
    "ένα","ένας", "έναν", "δύο", "τρεις", "τρία", "τέσσερις", "πέντε","έξι","επτά", "δέκα", "μέχρι"
])


def create_stemmed_stopwords_file():
    print(f"Reading from {input_file}...")
    
    unique_stems = set()
    
    try:
        with open(input_file, 'r', encoding='utf-8') as f:
            lines = f.readlines()
            
        print(f"Found {len(lines)} raw stopwords.")
        
        for line in lines:
            word = line.strip()
            if not word: continue
            
            # 1. Stem the word exactly how we do in the main script
            # Remember: The library needs UPPERCASE to work, and we save as lowercase
            stemmed = stemmer.stem_word(word.upper(), 'VBG')
            
            if stemmed:
                continue
                unique_stems.add(stemmed.lower())
        for word in l_keywords:
            unique_stems.add(stemmer.stem_word(word.upper(), 'VBG').lower())
                
        # 2. Write to the new file
        with open(output_file, 'w', encoding='utf-8') as f:
            # Sort them so the file is readable
            for s in sorted(unique_stems):
                f.write(s + '\n')
                
        print(f"Success! Created {output_file} with {len(unique_stems)} unique stems.")
        print("You can now manually check this file to see if 'κυρι' is there.")
        
    except FileNotFoundError:
        print("Error: stopwords.txt not found.")

if __name__ == "__main__":
    create_stemmed_stopwords_file()